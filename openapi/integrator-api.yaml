openapi: 3.1.0
info:
  title: Vlantegrator API
  description: API платформы Vlantegrator
  contact:
    name: Support
    email: vlantegrator-support@gmail.com
  version: 1.0.0
servers:
- url: http://localhost:8080
  description: Generated server url
tags:
- name: Docker API
  description: Прямое взаимодействие с Docker
- name: Routes API
  description: Операции для работы с маршрутами
- name: User API
  description: Управление данными пользователей
- name: Actuator
  description: Monitor and interact
  externalDocs:
    description: Spring Boot Actuator Web API Documentation
    url: https://docs.spring.io/spring-boot/docs/current/actuator-api/html/
- name: Health API
  description: Информация о состоянии системы
- name: Adapters API
  description: Операции для работы с адаптерами маршрутов
paths:
  /api/v1/user/settings:
    get:
      tags:
      - User API
      summary: Получить настройки пользователя
      description: Получить настройки пользователя
      operationId: getUserSettings
      responses:
        "200":
          description: Настройки пользователя возвращены
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserSettingsDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
    post:
      tags:
      - User API
      summary: Обновить настройки пользователя
      description: Обновить настройки пользователя
      operationId: updateUserSettings
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserSettingsDto"
        required: true
      responses:
        "200":
          description: Настройки пользователя обновлены
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route:
    get:
      tags:
      - Routes API
      summary: Получить информацию о всех маршрутах
      description: Отдаёт информацию о всех маршрутах
      operationId: getAllRoutes
      responses:
        "200":
          description: Информация о всех маршрутах
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
    post:
      tags:
      - Routes API
      summary: Создать маршрут
      description: Создаёт новый маршрут на основе переданной конфигурации
      operationId: createRoute
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRouteRequestDto"
        required: true
      responses:
        "201":
          description: Маршрут создан
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RouteIdDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/{id}/{versionHash}/definition:
    get:
      tags:
      - Routes API
      summary: Получить структуру маршрута
      description: Отдаёт структуру маршрута в качестве ответа
      operationId: getRouteDefinition
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      - name: versionHash
        in: path
        required: true
        schema:
          type: string
          description: Хэш-код версии маршрута
      responses:
        "200":
          description: Структура маршрута получена
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RouteDefinitionDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
    post:
      tags:
      - Routes API
      summary: Обновить структуру маршрута
      description: Обновляет структуру имеющегося маршрута на основе переданной конфигурации
      operationId: updateRouteDefinition
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      - name: versionHash
        in: path
        required: true
        schema:
          type: string
          description: Хэш-код версии маршрута
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RouteDefinitionDto"
        required: true
      responses:
        "200":
          description: Структура маршрута обновлена
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RouteIdDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/{id}/deploy:
    post:
      tags:
      - Routes API
      summary: Развернуть маршрут
      description: "Выполнить действие по отношению к развёртыванию маршрута: запу\
        стить, остановить, удалить, перезапустить"
      operationId: deployRoute
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      - name: action
        in: query
        required: true
        schema:
          type: string
          description: Действие
      responses:
        "202":
          description: Запрос на выполнение действия по отношению к развёртыванию
            маршрута принят
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/{id}/build:
    post:
      tags:
      - Routes API
      summary: Асинхронная сборка маршрута
      description: Запускает процесс сборки маршрута (compile + build image) в фоновом
        режиме
      operationId: buildRoute
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      responses:
        "202":
          description: Запрос на сборку принят
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/status:
    post:
      tags:
      - Routes API
      summary: Поиск статуса маршрутов
      description: Отдаёт статусы развёртывания маршрутов по их идентификаторам
      operationId: getRoutesStatus
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/RouteIdDto"
        required: true
      responses:
        "200":
          description: Информация о статусе маршрутов
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/search:
    post:
      tags:
      - Routes API
      summary: Поиск информации о маршрутах по критерию
      description: "Отдаёт информацию о маршрутах, соответствующих критерию"
      operationId: searchRoutes
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SearchRoutesRequestDto"
        required: true
      responses:
        "200":
          description: "Информация о маршрутах, соответствующих критерию"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/docker/networks:
    get:
      tags:
      - Docker API
      summary: Получить docker-сети
      description: Получить список всех имеющихся docker-сетей
      operationId: getDockerNetworks
      responses:
        "200":
          description: Доступные docker-сети
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DockerNetworkDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
    post:
      tags:
      - Docker API
      summary: Создать docker-сеть
      description: Создать docker-сеть
      operationId: createDockerNetwork
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DockerNetworkDto"
        required: true
      responses:
        "201":
          description: Создать docker-сеть
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/{id}:
    get:
      tags:
      - Routes API
      summary: Получить информацию о маршруте
      description: Отдаёт информацию о маршруте
      operationId: getRoute
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      responses:
        "200":
          description: Информация о маршруте
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RouteDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Routes API
      summary: Удалить маршрут
      description: "Полностью удалить маршрут, в том числе все его контейнер и обр\
        азы"
      operationId: deleteRoute
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      responses:
        "204":
          description: Маршрут удалён
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
    patch:
      tags:
      - Routes API
      summary: Обновить конфиг маршрута
      description: Обновляет конфиг имеющегося маршрута на основе переданной конфигурации
      operationId: updateRoute
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRouteRequestDto"
        required: true
      responses:
        "200":
          description: Конфиг маршрута обновлён
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/{id}/versions:
    get:
      tags:
      - Routes API
      summary: Получить информацию об имеющихся в кэше версиях маршрута
      description: "Получить версии маршрута, структура которых хранится в кэше"
      operationId: getRouteVersions
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID маршрута
      responses:
        "200":
          description: Список версий
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/route/actions:
    get:
      tags:
      - Routes API
      summary: Получить действия пользователей над маршрутами
      description: "Получить список действий, предпринимаемых текущим или всеми по\
        льзователями над маршрутами в платформе, отсортированный по времени соверш\
        ения действия от нового к старому"
      operationId: getRouteUserActions
      parameters:
      - name: personal
        in: query
        required: true
        schema:
          type: boolean
          description: Возвращать только действия текущего пользователя
      - name: limit
        in: query
        required: true
        schema:
          type: integer
          description: Ограничить количество возвращаемых записей
      responses:
        "200":
          description: Список действий над маршрутами
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteUserActionDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/health/basic:
    get:
      tags:
      - Health API
      summary: Получить основную информацию о состоянии системы
      description: "Получить информацию о потребляемых ресурсах процессора и памят\
        и, а также о здоровье БД ядра и кластеров Kafka"
      operationId: getBasicHealth
      responses:
        "200":
          description: Основная информация о состоянии системы
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PlatformBasicHealthDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/adapter:
    get:
      tags:
      - Adapters API
      summary: Получить информацию об адаптерах
      description: Возвращает краткое описание всех имеющихся адаптеров
      operationId: getAllAdapters
      responses:
        "200":
          description: Описания получены
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AdapterDto"
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /api/v1/adapter/{id}/config:
    get:
      tags:
      - Adapters API
      summary: Получить описание конфигурации адаптера
      description: Возвращает описание конфигурации адаптера с переданным ID в формате
        JSONSchema
      operationId: getAdapterConfigSchema
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: ID адаптера
      responses:
        "200":
          description: Конфигурация получена
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Некорректный запрос
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "401":
          description: Не авторизован
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "403":
          description: Доступ запрещён
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
        "500":
          description: Ошибка сервера
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetail"
      security:
      - bearerAuth: []
  /actuator:
    get:
      tags:
      - Actuator
      summary: Actuator root web endpoint
      operationId: links
      responses:
        "200":
          description: OK
          content:
            application/vnd.spring-boot.actuator.v3+json:
              schema:
                type: object
                additionalProperties:
                  type: object
                  additionalProperties:
                    $ref: "#/components/schemas/Link"
            application/vnd.spring-boot.actuator.v2+json:
              schema:
                type: object
                additionalProperties:
                  type: object
                  additionalProperties:
                    $ref: "#/components/schemas/Link"
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: object
                  additionalProperties:
                    $ref: "#/components/schemas/Link"
  /actuator/health:
    get:
      tags:
      - Actuator
      summary: Actuator web endpoint 'health'
      operationId: health
      responses:
        "200":
          description: OK
          content:
            application/vnd.spring-boot.actuator.v3+json:
              schema:
                type: object
            application/vnd.spring-boot.actuator.v2+json:
              schema:
                type: object
            application/json:
              schema:
                type: object
components:
  schemas:
    ProblemDetail:
      type: object
      properties:
        type:
          type: string
          format: uri
        title:
          type: string
        status:
          type: integer
          format: int32
        detail:
          type: string
        instance:
          type: string
          format: uri
        properties:
          type: object
          additionalProperties:
            type: object
    UserAccessibilitySettingsDto:
      type: object
      description: Пользовательские настройки accessibility
      properties:
        disableAnimations:
          type: boolean
          description: Выключить анимации
        enableHighContrast:
          type: boolean
          description: Включить режим высокой контрастности
      required:
      - disableAnimations
      - enableHighContrast
    UserEditorSettingsDto:
      type: object
      description: Пользовательские настройки редактора маршрутов
      properties:
        showGrid:
          type: boolean
          description: Показывать ли сетку в редакторе маршрута
        defaultViewportPosition:
          type: string
          description: Позиция камеры по-умолчанию в редакторе маршрута
        autosaveIntervalMs:
          type: integer
          format: int64
          description: "Интервал в Мс, через который определение маршрута будет со\
            храняться автоматически. -1 для отключения"
      required:
      - autosaveIntervalMs
      - defaultViewportPosition
      - showGrid
    UserSettingsDto:
      type: object
      description: Пользовательские настройки. Не влияют на работу всей платформы
      properties:
        editor:
          $ref: "#/components/schemas/UserEditorSettingsDto"
          description: Настройки редактора маршрутов
        accessibility:
          $ref: "#/components/schemas/UserAccessibilitySettingsDto"
          description: Настройки редактора accessibility
      required:
      - accessibility
      - editor
    RouteIdDto:
      type: object
      description: Полный идентификатор маршрута
      properties:
        id:
          type: string
          format: uuid
          description: ID маршрута
        versionHash:
          type: string
          description: Хэш-код версии маршрута
      required:
      - id
    CreateRouteRequestDto:
      type: object
      description: Запрос на создание маршрута
      properties:
        name:
          type: string
          description: Имя маршрута
        description:
          type: string
          description: Описание маршрута
        ownerName:
          type: string
          description: Username владельца. Если пустой – владельцем маршрута становится
            инициатор запроса
        publishedPorts:
          type: string
          description: Маппинг портов
        networks:
          type: array
          description: Сети маршрута. Должны быть предварительно созданы
          items:
            $ref: "#/components/schemas/DockerNetworkDto"
        env:
          type: object
          additionalProperties:
            type: object
          description: Конфигурация среды маршрута
      required:
      - env
      - name
      - networks
    DockerNetworkDto:
      type: object
      description: Docker-сеть
      properties:
        name:
          type: string
          description: Имя сети
          minLength: 1
        driver:
          type: string
          description: Драйвер сети
          minLength: 1
      required:
      - driver
      - name
    ConnectionDto:
      type: object
      description: Соединение узлов
      properties:
        id:
          type: string
          format: uuid
          description: Идентификатор соединения
        sourceId:
          type: string
          format: uuid
          description: Идентификатор узла-источника
        targetId:
          type: string
          format: uuid
          description: Идентификатор узла-цели
        style:
          $ref: "#/components/schemas/ConnectionStyleDto"
          description: Стили соединения
      required:
      - id
      - sourceId
      - style
      - targetId
    ConnectionStyleDto:
      type: object
      description: Стилизация соединения
      properties:
        type:
          type: string
          description: Тип соединения
        startMarkerType:
          type: string
          description: Тип начала соединения
        endMarkerType:
          type: string
          description: Тип конца соединения
        animated:
          type: boolean
          description: Соединение анимировано
        focusable:
          type: boolean
          description: Соединение можно взять в фокус
      required:
      - animated
      - endMarkerType
      - focusable
      - startMarkerType
      - type
    NodeDto:
      type: object
      description: Узел маршрута
      properties:
        id:
          type: string
          format: uuid
          description: Идентификатор узла
        adapterId:
          type: string
          format: uuid
          description: Идентификатор адаптера узла
        name:
          type: string
          description: Кастомное имя узла
        config:
          type: object
          additionalProperties:
            type: object
          description: Конфиг узла
        style:
          $ref: "#/components/schemas/NodeStyleDto"
          description: Стилизация узла
        position:
          $ref: "#/components/schemas/NodePositionDto"
          description: Координаты узла на canvas
      required:
      - adapterId
      - config
      - id
      - name
      - position
      - style
    NodePositionDto:
      type: object
      description: Координаты узла на canvas
      properties:
        x:
          type: integer
          format: int32
          description: Координата X
        "y":
          type: integer
          format: int32
          description: Координата Y
        zIndex:
          type: integer
          format: int32
          description: Z-индекс узла
      required:
      - x
      - "y"
      - zIndex
    NodeStyleDto:
      type: object
      description: Стилизация узла
      properties:
        type:
          type: string
          description: Тип узла
          examples:
          - default
          - input
          - output
          - group
        config:
          type: object
          additionalProperties:
            type: object
          description: Стили узла
      required:
      - config
      - type
    RouteDefinitionDto:
      type: object
      description: Структура маршрута
      properties:
        nodes:
          type: array
          description: Узлы маршрута
          items:
            $ref: "#/components/schemas/NodeDto"
        connections:
          type: array
          description: Соединения маршрута
          items:
            $ref: "#/components/schemas/ConnectionDto"
      required:
      - connections
      - nodes
    RouteDto:
      type: object
      description: Конфигурация маршрута
      properties:
        routeId:
          $ref: "#/components/schemas/RouteIdDto"
          description: Идентификатор маршрута (uuid + versionHash)
        name:
          type: string
          description: Имя маршрута
        description:
          type: string
          description: Описание маршрута
        ownerName:
          type: string
          description: Username владельца. Если пустой – владельцем маршрута становится
            инициатор запроса
        publishedPorts:
          type: string
          description: Маппинг портов
        networks:
          type: array
          description: Сети маршрута. Должны быть предварительно созданы
          items:
            $ref: "#/components/schemas/DockerNetworkDto"
        env:
          type: object
          additionalProperties:
            type: object
          description: Конфигурация среды маршрута
      required:
      - description
      - env
      - name
      - networks
      - ownerName
      - publishedPorts
      - routeId
    SearchRoutesRequestDto:
      type: object
      description: Запрос на поиск маршрутов
      properties:
        field:
          type: string
          description: "Поле, по которому производится поиск"
          enum:
          - ID
          - NAME
          - OWNER
        query:
          type: string
          description: "Значение, введённое пользователем в строке поиска"
          minLength: 1
      required:
      - field
      - query
    UpdateRouteRequestDto:
      type: object
      description: Запрос на изменение конфигурации маршрута
      properties:
        name:
          type: string
          description: Имя маршрута
        description:
          type: string
          description: Описание маршрута
        ownerName:
          type: string
          description: Username владельца. Если пустой – владельцем маршрута становится
            инициатор запроса
        publishedPorts:
          type: string
          description: Маппинг портов
        networks:
          type: array
          description: Сети маршрута. Должны быть предварительно созданы
          items:
            $ref: "#/components/schemas/DockerNetworkDto"
        env:
          type: object
          additionalProperties:
            type: object
          description: Конфигурация среды маршрута
      required:
      - env
      - name
      - networks
    RouteUserActionDto:
      type: object
      description: Описание действия пользователя
      properties:
        routeId:
          $ref: "#/components/schemas/RouteIdDto"
          description: "Идентификатор маршрута, с которым было совершено действие"
        userName:
          type: string
          description: Имя пользователя
        userDisplayName:
          type: string
          description: Полное имя пользователя
        action:
          type: string
          description: Действие
        attemptedAt:
          type: string
          format: date-time
          description: "Момент времени, в который было совершено действие"
      required:
      - action
      - attemptedAt
      - routeId
      - userDisplayName
      - userName
    PlatformBasicHealthDto:
      type: object
      description: Основная информация о состоянии платформы
      properties:
        cpuPercent:
          type: number
          format: double
          description: Процент используемых ресурсов CPU
        memUsedBytes:
          type: integer
          format: int64
          description: Используемая оперативная память в байтах
        memTotalBytes:
          type: integer
          format: int64
          description: Общий объём выделенной памяти на клиент
        dbStatus:
          type: string
          description: Статус БД ядра
          enum:
          - HEALTHY
          - UNHEALTHY
          - UNKNOWN
          - STARTING
        kafkaStatus:
          type: string
          description: Статус Kafka
          enum:
          - HEALTHY
          - UNHEALTHY
          - UNKNOWN
          - STARTING
      required:
      - cpuPercent
      - dbStatus
      - kafkaStatus
      - memTotalBytes
      - memUsedBytes
    AdapterDto:
      type: object
      description: Описание адаптера
      properties:
        id:
          type: string
          format: uuid
          description: Идентификатор адаптера
        name:
          type: string
          description: Название адаптера
        displayName:
          type: string
          description: Отображаемое название адаптера
        description:
          type: string
          description: Описание адаптера
        className:
          type: string
          description: Полное имя класса адаптера
        type:
          type: string
          description: Тип адаптера
        direction:
          type: string
          description: Направление (IN/OUT/COMMON)
        channelKind:
          type: string
          description: Тип канала (CHANNEL/GATEWAY/NONE)
      required:
      - channelKind
      - className
      - description
      - direction
      - displayName
      - id
      - name
      - type
    Link:
      type: object
      properties:
        href:
          type: string
        templated:
          type: boolean
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
